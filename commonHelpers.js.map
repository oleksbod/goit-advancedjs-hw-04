{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45384085-93240435f28f8173a532fd559';\n\nexport const fetchImages = async (query, page = 1, perPage = 15) => {\n    const url = `https://pixabay.com/api/?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    const response = await axios.get(url);\n\n    return response.data;\n}","import iziToast from \"izitoast\";\nimport SimpleLightbox from 'simplelightbox';\n\nexport const showToast = (msg) => {\n    iziToast.error({\n        position: \"topRight\",\n        icon: 'icon-bi_x-octagon',\n        title: '',\n        progressBarColor: 'rgb(181, 27, 27)',\n        message: msg\n    });\n}\n\nexport const showInfoToast = (msg) => {\n    iziToast.info({\n        position: \"topRight\",\n        icon: 'icon-bi_info',\n        title: '',\n        message: msg,\n        progressBar: 'rgb(0, 113, 189)',\n    });\n}\n\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\n//markup\nconst galleryMarkup = (images) => images.map(image =>\n    `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img\n            class=\"gallery-image\"\n            src=\"${image.webformatURL}\"\n            alt=\"${image.tags}\">\n        <div class=\"gallery-footer\">\n            <div class=\"item-block\">\n                <span class=\"item-title\">Likes</span>\n                <span class=\"item-count\">${image.likes}</span>\n            </div>\n            <div class=\"item-block\">\n                <span class=\"item-title\">Views</span>\n                <span class=\"item-count\">${image.views}</span>\n            </div>\n            <div class=\"item-block\">\n                <span class=\"item-title\">Comments</span>\n                <span class=\"item-count\">${image.comments}</span>\n            </div>\n            <div class=\"item-block\">\n                <span class=\"item-title\">Downloads</span>\n                <span class=\"item-count\">${image.downloads}</span>\n            </div>\n        </div>\n      </a>\n     </li>`\n).join('');\n\nexport const showGallery = (images) => {\n    gallery.innerHTML = galleryMarkup(images);\n    lightbox.refresh();\n}\n\nexport const appendGallery = (images) => {\n    gallery.insertAdjacentHTML('beforeend', galleryMarkup(images));\n    lightbox.refresh();\n};\n","import { fetchImages } from './js/pixabay-api';\nimport { showGallery, showToast, appendGallery, showInfoToast } from './js/render-functions';\n\nconst searchForm = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('#loadMoreButton');\n\nlet currentPage = 1;\nlet searchQuery = '';\nlet imagesPerLoad = 15;\n\nconst onSearchFormSubmit = async (event) => {\n    event.preventDefault();\n\n    const searchedValue = event.target.elements.user_query.value.trim();\n\n    if (searchedValue === '') {\n        showToast(\"Fill out the search field!\");\n        searchForm.reset();\n        return;\n    }\n\n    searchQuery = searchedValue;\n    currentPage = 1;\n    loadMoreButton.classList.add('is-hidden');\n    loader.classList.remove('is-hidden');\n    showGallery([]);\n\n    try {\n        const result = await fetchImages(searchedValue, currentPage, imagesPerLoad);\n\n        if (result && result?.hits?.length === 0) {\n            showToast(\"Sorry, there are no images matching your search query. Please try again!\");\n            searchForm.reset();\n            return;\n        }\n\n        showGallery(result.hits);\n\n        if (result.totalHits > imagesPerLoad) {\n            loadMoreButton.classList.remove('is-hidden');\n        }\n    }\n    catch (err) {\n        console.log(err);\n    }\n    finally {\n        loader.classList.add('is-hidden');\n        searchForm.reset();\n    }\n};\n\nconst onLoadMoreButtonClick = async () => {\n    currentPage += 1;\n    loader.classList.remove('is-hidden');\n\n    try {\n        const result = await fetchImages(searchQuery, currentPage, imagesPerLoad);\n        appendGallery(result.hits);\n\n        smoothScroll();\n\n        if (currentPage * imagesPerLoad >= result.totalHits) {\n            loadMoreButton.classList.add('is-hidden');\n            showInfoToast(\"We're sorry, but you've reached the end of search results.\");\n        }\n    } catch (err) {\n        console.log(err);\n    } finally {\n        loader.classList.add('is-hidden');\n    }\n};\n\nconst smoothScroll = () => {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (galleryItem) {\n        const { height } = galleryItem.getBoundingClientRect();\n        window.scrollBy({\n            top: height * 2,\n            behavior: 'smooth',\n        });\n    }\n};\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreButton.addEventListener('click', onLoadMoreButtonClick);"],"names":["API_KEY","fetchImages","query","page","perPage","url","axios","showToast","msg","iziToast","showInfoToast","gallery","lightbox","SimpleLightbox","galleryMarkup","images","image","showGallery","appendGallery","searchForm","loader","loadMoreButton","currentPage","searchQuery","imagesPerLoad","onSearchFormSubmit","event","searchedValue","result","_a","err","onLoadMoreButtonClick","smoothScroll","galleryItem","height"],"mappings":"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"}